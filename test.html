<!-- webpage chat interface -->
<!-- test.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head><meta charset="UTF-8"><title>AIæœºå™¨äººæµ‹è¯•</title>
<style>body{font-family:sans-serif;max-width:600px;margin:40px auto;padding:20px;} .msg{ margin:10px 0; padding:12px; border-radius:8px;} .user{background:#e3f2fd;text-align:right;} .ai{background:#f5f5f5;} input, button{padding:10px;margin-top:10px;width:100%;box-sizing:border-box;}</style>
</head>
<body>
    <h2>ğŸ¤– ä¸ä½ çš„AIæœºå™¨äººå¯¹è¯</h2>
    <div id="chatBox"></div>
    <input type="text" id="input" placeholder="è¾“å…¥æ¶ˆæ¯..." autocomplete="off">
    <button onclick="sendMessage()">å‘é€</button>
    <script>
        async function sendMessage() {
            const input = document.getElementById('input');
            const msg = input.value.trim();
            if(!msg) return;

            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            document.getElementById('chatBox').innerHTML += `<div class="msg user"><strong>ä½ ï¼š</strong>${msg}</div>`;
            input.value = '';

            // æ˜¾ç¤ºâ€œæ€è€ƒä¸­â€
            document.getElementById('chatBox').innerHTML += `<div class="msg ai" id="thinking"><em>æ€è€ƒä¸­...</em></div>`;
            document.getElementById('chatBox').scrollTop = 1e9;

            // å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨
            const resp = await fetch('http://localhost:8000/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({message: msg, user_id: 'test'})
            });
            const data = await resp.json();

            // ç§»é™¤â€œæ€è€ƒä¸­â€ï¼Œæ˜¾ç¤ºAIå›å¤
            document.getElementById('thinking').remove();
            document.getElementById('chatBox').innerHTML += `<div class="msg ai"><strong>AIï¼š</strong>${data.reply}</div>`;
            input.focus();
        }
        document.getElementById('input').onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };
    </script>
</body>
</html>